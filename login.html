<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>tolelom</title>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./login.css" />
  </head>
  <body>
    <div class="nav">
      <div>
        <img src="./img/king.jpg" class="logo" onclick="location.href='/'" />
      </div>
      <div class="tolelom" onclick="location.href='/'">tolelom</div>

      <div class="nav-items-left">
        <div class="nav-item" onclick="location.href='/editor'">에디터</div>
        <div class="nav-item">문법</div>
        <div class="nav-item">도움말</div>
        <div class="nav-item">
          <img src="./img/search.jpg" class="search" />
        </div>
      </div>
      <div class="nav-items-right">
        <div class="nav-item">로그인</div>
      </div>
    </div>
    <div class="main">
      <h3>로그인</h3>
      <div>
        <input
          type="text"
          placeholder="아이디"
          class="form-control"
          name="id"
          id="id"
          autofocus="autofocus"
        />
      </div>
      <div>
        <input
          type="password"
          placeholder="비밀번호"
          class="form-control"
          name="pw"
          id="pw"
        />
      </div>
      <div>
        <button class="login" onClick="login()">로그인</button>
      </div>
      <div class="main-bottom">
        <div class="forgot-pw">비밀번호 찾기</div>
        <div class="register" onclick="location.href='/register'">회원가입</div>
      </div>
    </div>
  </body>
  <script>
    function login() {
      $.ajax({
        url: "/login",
        method: "POST",
        dataType: "json",
        data: {
          id: document.getElementById("id").value,
          pw: document.getElementById("pw").value,
        },
        success: (result) => {
          window.location.href = result.redirectTo;
        },
        error: function (request, status, error) {
          console.log("에러 발생: " + error);
        },
      });
    }
  </script>
</html>
